import{d as f,r as x,x as u,y as s,I as m,z as o,J as I,K as b,L as S,M as _,D as C,A as v,N,o as O,B as g,_ as U}from"./BWA-G0Uq.js";const V=f({__name:"PlayerForm",emits:["add-player"],setup(i,{emit:a}){const c=a,r=x("");function d(){r.value&&(c("add-player",{id:crypto.randomUUID(),name:r.value}),r.value="")}return(p,l)=>(s(),u(m,null,[l[1]||(l[1]=o("h2",null,"プレイヤー登録",-1)),I(o("input",{"onUpdate:modelValue":l[0]||(l[0]=n=>r.value=n)},null,512),[[b,r.value]]),o("button",{onClick:d},"追加")],64))}}),$=Object.assign(V,{__name:"PlayerForm"}),P=["onUpdate:modelValue"],w=f({__name:"RoundInput",props:{players:{}},emits:["add-round"],setup(i,{emit:a}){const c=i,r=a,d=S({}),p=()=>{let l=0;for(const e of c.players)l+=d[e.id]??0;if(l!==0){alert("点数の合計が 0 になるように入力してください");return}const n=[];for(const e of c.players){const t=d[e.id]??0;t!==0&&n.push({playerId:e.id,delta:t}),d[e.id]=0}n.length!==0&&r("add-round",n)};return(l,n)=>(s(),u(m,null,[n[0]||(n[0]=o("h2",null,"ラウンド追加",-1)),(s(!0),u(m,null,_(i.players,e=>(s(),u("div",{key:e.id},[C(v(e.name)+" ",1),I(o("input",{type:"number","onUpdate:modelValue":t=>d[e.id]=t,placeholder:"点数変動"},null,8,P),[[b,d[e.id],void 0,{number:!0}]])]))),128)),o("button",{onClick:p},"このラウンドを確定")],64))}}),A=Object.assign(w,{__name:"RoundInput"}),B={border:"1",cellpadding:"6"},D=["onClick"],F=f({__name:"RoundHistory",props:{players:{},rounds:{}},emits:["remove-round"],setup(i,{emit:a}){const c=i,r=a,d=l=>c.rounds.reduce((n,e)=>{const t=e.changes.find(y=>y.playerId===l);return n+(t?.delta??0)},0),p=l=>{confirm("このラウンドを削除しますか？")&&r("remove-round",l)};return(l,n)=>(s(),u(m,null,[n[3]||(n[3]=o("h2",null,"ラウンド結果",-1)),o("table",B,[o("thead",null,[o("tr",null,[n[0]||(n[0]=o("th",null,"Round",-1)),(s(!0),u(m,null,_(i.players,e=>(s(),u("th",{key:e.id},v(e.name),1))),128))])]),o("tbody",null,[o("tr",null,[n[1]||(n[1]=o("td",null,"合計",-1)),(s(!0),u(m,null,_(i.players,e=>(s(),u("td",{key:e.id},v(d(e.id)),1))),128)),n[2]||(n[2]=o("td",null,null,-1))]),(s(!0),u(m,null,_(i.rounds,e=>(s(),u("tr",{key:e.id},[o("td",null,v(e.id),1),(s(!0),u(m,null,_(i.players,t=>(s(),u("td",{key:t.id},v(e.changes.find(y=>y.playerId===t.id)?.delta??0),1))),128)),o("td",null,[o("button",{onClick:t=>p(e.id)}," Undo ",8,D)])]))),128))])])],64))}}),j=Object.assign(F,{__name:"RoundHistory"}),E={class:"page"},R="score-game",H=f({__name:"index",setup(i){const a=x([]),c=e=>{a.value.push(e)},r=x([]);let d=1;const p=e=>{r.value.push({id:d++,changes:e})},l=e=>{r.value=r.value.filter(t=>t.id!==e)};N([a,r],()=>{const e={players:a.value,rounds:r.value};localStorage.setItem(R,JSON.stringify(e))},{deep:!0}),O(()=>{const e=localStorage.getItem(R);if(e)try{const t=JSON.parse(e);a.value=t.players??[],r.value=t.rounds??[]}catch(t){console.error("localStorage の読み込みに失敗しました",t)}});function n(){confirm("データを削除しますか？")&&(localStorage.removeItem(R),a.value=[],r.value=[])}return(e,t)=>{const y=$,k=A,h=j;return s(),u("main",E,[t[0]||(t[0]=o("h1",null,"ドボン計算アプリ",-1)),g(y,{players:a.value,onAddPlayer:c},null,8,["players"]),g(k,{players:a.value,onAddRound:p},null,8,["players"]),g(h,{players:a.value,rounds:r.value,onRemoveRound:l},null,8,["players","rounds"]),o("button",{onClick:n},"全データリセット")])}}}),M=U(H,[["__scopeId","data-v-09b9cf35"]]);export{M as default};
